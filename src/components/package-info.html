<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-request.html">

<dom-module id="package-info">
    <template>
        <style>
            .keyword {
                border: 1px solid salmon;
                border-radius: 3px;
                padding: 3px;
                margin: 3px;
                display: inline-block;
            }

            .dependenciy {
                border-bottom: 1px solid #eeeeee;

                padding: 3px;
                margin: 3px;
                display: block;
            }
        </style>
        <!-- <iron-request id="apiRequest"></iron-request> -->

        <iron-ajax id="apiRequest" url="http://localhost:5000/[[slectedNode.nodeAttributes.package]]/[[slectedNode.nodeAttributes.version]]"
            handle-as="json" last-response="{{jsonLoaded}}" method="GET" debounce-duration="300"></iron-ajax>

        <template is="dom-if" if="[[jsonLoaded]]">

            <div>
                [[selectedNode.name]] Package: [[package.nodeAttributes.package]]/[[package.version]]
                <br> [[jsonLoaded.name]] [[jsonLoaded.version]]
                <br>
                <!-- [[jsonLoaded.keywords]] -->
                <template is="dom-repeat" items="[[jsonLoaded.keywords]]">
                    <div class="keyword">[[item]]</div>
                </template>

                <!-- <template is="dom-repeat" items="[[jsonLoaded.dependencies]]">
                                    <div class="keyword">[[item]]</div>
                                </template> -->

                <h3>Dependencies:</h3>
                <template is="dom-repeat" items="[[outputs]]">
                    <!-- <div class="dependenciy">
                        <span>[[item.nodeAttributes.package]]</span>
                        <span>[[item.nodeAttributes.version]]</span>
                    </div> -->
                    <dependency-link item="[[item]]"></dependency-link>
                </template>
                <h3>Is a dependendency of: </h3>
                <template is="dom-repeat" items="[[inputs]]">
                    <!-- <div class="dependenciy" on-tap="dependenciyClicked">
                        <span>[[item.nodeAttributes.package]]</span>
                        <span>[[item.nodeAttributes.version]]</span>
                    </div> -->
                    <dependency-link item="[[item]]"></dependency-link>
                </template>
            </div>
        </template>

    </template>
</dom-module>


<dom-module id="dependency-link">
    <template>
        <div class="dependenciy" on-mouseover="_nodeListener"
        on-mouseout="_nodeListener"
        on-click="_nodeListener">
            <span>[[item.nodeAttributes.package]]</span>
            <span>[[item.nodeAttributes.version]]</span>
        </div>
    </template>
</dom-module>